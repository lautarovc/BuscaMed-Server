<!DOCTYPE html>
<html>
<head>
	<title>Lectura de archivo</title>
	{% load static %}
	<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" id="bootstrap-css">
	<link href="{% static 'css/common.css' %}" rel="stylesheet" type="text/css" />
	
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script src="{% static 'js/jquery.csv.js'%}"></script>
  <script src="{% static 'js/readFile.js' %}"></script>

	<!-- file upload and toastr js -->
	<link href="{% static 'fileuploads/css/dropify.min.css' %}" rel="stylesheet" type="text/css" />
	<script src="{% static 'fileuploads/js/dropify.js' %}"></script>

</head>
{% block content %}
<body id="LoginForm">

<div class="container">
  <div class="navigate">
    <h1 class="form-heading">Buscamed Venezuela</h1>
    <a href="{% url home %}" id="logoutButton">Cerrar sesi√≥n</a>
  </div>
  <div class="login-form">
    <div class="main-div">
      <div class="panel">
        <h2>Ingreso Inventario</h2>
        <p>Por favor seleccione el archivo .csv con el inventario a cargar:</p>
      </div>
      <form id="Login" method="post" action="">
      {% csrf_token %}

        <div class="form-group">
          	<input type="file" name="fileName" id="fileName" class="dropify" data-allowed-file-extensions="csv"> 
        </div>

		<input type="hidden" id="csv" name="csv">
		<button type="submit" id="formButton" style="display: none;"></button>

      </form>
	  <div class="forgot">
	    <a href="#" id="instructions">Instrucciones</a>
      <p id="secretMessage">Debe subir un archivo .csv que tenga las siguientes columnas: activo, medicina, presentacion y disponibilidad. Puede contener otras columnas, pero las anteriores deben aparecer con dichos nombres.</p>
	  </div>

	  <button onclick="readCSV()" class="btn btn-primary">Cargar archivo</button>

    </div>
    <p class="botto-text"> Designed by Sunil Rajput</p>
  </div>
</div>

<!-- Alert Script -->
<script type="text/javascript">
    var context = {{ success }};

    if (context > 0) {
      alert("Carga exitosa!");
    }
    else if (context == 0) {
      alert("Error: Error in upload. Please contact administator.")
    }
</script>

<!-- dropify script -->
<script type="text/javascript">
    $('.dropify').dropify({
        messages: {
            'default': 'Drag and drop a file here or click',
            'replace': 'Drag and drop or click to replace',
            'remove': 'Remove',
            'error': 'Ooops, something wrong.'
        },
        error: {
            'fileSize': 'The file size is too big (1M max).'
        }
    });
</script>

<!-- toggle script -->
<script>
  $(document).ready(function(){
    $("#instructions").click(function(){
      $("#secretMessage").toggle();
    });
  });
</script>

</body>
{% endblock content %}
</html>