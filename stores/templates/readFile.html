<!DOCTYPE html>
<html>
<head>
	<title>Lectura de archivo</title>
	{% load static %}
	<link href="{% static 'css/landing-page.css' %}" rel="stylesheet"/>
	<script src="{% static 'js/jquery.csv.js'%}"></script>
  <script src="{% static 'js/readFile.js' %}"></script>

	<!-- file upload and toastr js -->
	<link href="{% static 'fileuploads/css/dropify.min.css' %}" rel="stylesheet" type="text/css" />
	<script src="{% static 'fileuploads/js/dropify.js' %}"></script>

</head>
{% block content %}
<body id="LoginForm">

 <!-- Navigation -->
    <nav class="navbar navbar-light bg-light static-top navbar-blue">
      <div class="container">
        <a class="navbar-brand" href="{% url 'home' %}">Buscamed</a>
        <!-- <a class="btn btn-primary" href="#">Sign In</a> -->
      </div>
    </nav>

 <!-- Masthead -->
    <header class="masthead text-white text-center">
      <div class="container">
        <div class="row">
          <div class="col-xl-12">
            <div class="login-form">
              <div class="main-div">
               <div class="panel">
                <h2>Ingreso Inventario</h2>
                <p>Por favor seleccione el archivo .csv con el inventario a cargar:</p>
                </div>
                <form id="Login" method="post" action="">
                  {% csrf_token %}

                  <div class="form-group">
                      <input type="file" name="fileName" id="fileName" class="dropify" data-allowed-file-extensions="csv"> 
                  </div>

                  <input type="hidden" id="csv" name="csv">
                  <button type="submit" id="formButton" style="display: none;"></button>
                </form>
                <div class="forgot">
                  <a href="#" onclick="instructions();" id="instructions">Instrucciones</a>
                </div>
                <button onclick="readCSV()" class="btn btn-primary btn-orange">Cargar archivo</button>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Footer -->
    <footer class="footer bg-light">
      <div class="container">
        <div class="row">
          <div class="col-lg-6 h-100 text-center text-lg-left my-auto">
          </div>
          <div class="col-lg-6 h-100 text-center text-lg-right my-auto">
            <ul class="list-inline mb-0">
              <li class="list-inline-item mr-3">
               <h5>Informacion USB</h5>
              </li>
            </ul>
            <p class="text-muted small mb-4 mb-lg-0">&copy; Creditos</p>
          </div>
        </div>
      </div>
    </footer>

<!-- Alert Script -->
<script type="text/javascript">
    var context = {{ success }};

    if (context > 0) {
      alert("Carga exitosa!");
    }
    else if (context == 0) {
      alert("Error: Error in upload. Please contact administator.")
    }
</script>

<!-- dropify script -->
<script type="text/javascript">
    $('.dropify').dropify({
        messages: {
            'default': 'Drag and drop a file here or click',
            'replace': 'Drag and drop or click to replace',
            'remove': 'Remove',
            'error': 'Ooops, something wrong.'
        },
        error: {
            'fileSize': 'The file size is too big (1M max).'
        }
    });
</script>

<!-- toggle script -->
<script>
  $(document).ready(function(){
    $("#instructions").click(function(){
      $("#secretMessage").toggle();
    });
  });
</script>

</body>
{% endblock content %}
</html>